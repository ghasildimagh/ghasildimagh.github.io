window.__require=function t(e,i,o){function n(r,a){if(!i[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var d="function"==typeof __require&&__require;if(!a&&d)return d(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+r+"'")}}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){return n(e[r][1][t]||t)},l,l.exports,t,e,i,o)}return i[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<o.length;r++)n(o[r]);return n}({brainObject:[function(t,e,i){"use strict";cc._RF.push(e,"1659cYJCqlCFIia1rS8E6fF","brainObject"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./bucketObject"),n=cc._decorator,c=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gradient_node=null,e.rigidBody=null,e.collider=null,e.fill_amount=1,e.brain_washed=!1,e.accum_distance=0,e.accum_frames=0,e.is_dragging=!1,e.dragOffset=cc.Vec2.ZERO,e}var i;return __extends(e,t),i=e,e.prototype.set_gradient_percentage=function(){this.gradient_node.setPosition(cc.v2(0,460*(1-this.fill_amount))),console.log("Brain gradient.")},e.prototype.onLoad=function(){i.instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchDown,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchUp,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchUp,this),cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDrawBoundingBox=!0,this.collider.enabled=!0,this.collider.apply(),this.set_gradient_percentage(),console.log("Init brain")},e.prototype.start=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0},e.prototype.onBeginContact=function(t,e,i){if(this.accum_frames>0&&!this.brain_washed){var n=this.accum_distance/this.accum_frames;this.fill_amount-=n/2e3,this.set_gradient_percentage(),o.default.instance.set_gradient_percentage(),this.fill_amount<=0&&(this.brain_washed=!0,console.log("BRAINWASH COMPLETE.")),this.accum_frames=0,this.accum_distance=0}},e.prototype.onTouchDown=function(t){this.is_dragging=!0,this.setup_drag_offset(t),this.disableRigidbody()},e.prototype.onTouchMove=function(t){this.is_dragging||this.onTouchDown(t);var e=t.getDeltaY();e<0&&this.node.position.y>-80&&(this.accum_frames+=1,this.accum_distance+=Math.abs(e)),(e>0||this.node.position.y>-350)&&this.move_to_finger(t)},e.prototype.onTouchUp=function(t){this.is_dragging=!1},e.prototype.activateRigidbody=function(){this.rigidBody&&(this.rigidBody.type=cc.RigidBodyType.Dynamic,this.rigidBody.gravityScale=3),this.collider.sensor=!1,this.collider.apply()},e.prototype.disableRigidbody=function(){this.rigidBody.type=cc.RigidBodyType.Kinematic,this.rigidBody.linearVelocity=cc.Vec2.ZERO,this.rigidBody.angularVelocity=0,this.rigidBody.gravityScale=0,this.collider.sensor=!0,this.collider.apply(),this.rigidBody.allowSleep=!0,this.rigidBody.awake=!1},e.prototype.move_to_finger=function(t){var e=cc.Vec2.ZERO,i=t.getLocation().sub(e).sub(this.dragOffset);i.x=Math.min(Math.max(-100,i.x),100),i.y=Math.max(i.y,-350),this.node.position=i},e.prototype.setup_drag_offset=function(t){var e=t.getLocation(),i=cc.Vec2.ZERO,o=this.node.getPosition(),n=e.y-o.y;this.dragOffset=new cc.Vec2(e.x-i.x-o.x,n-i.y-20)},e.instance=null,__decorate([r(cc.Node)],e.prototype,"gradient_node",void 0),__decorate([r(cc.RigidBody)],e.prototype,"rigidBody",void 0),__decorate([r(cc.PhysicsPolygonCollider)],e.prototype,"collider",void 0),e=i=__decorate([c],e)}(cc.Component);i.default=a,cc._RF.pop()},{"./bucketObject":"bucketObject"}],bucketObject:[function(t,e,i){"use strict";cc._RF.push(e,"a8f20sH+59EaIuNswlt0A+m","bucketObject"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./brainObject"),n=cc._decorator,c=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gradient_node=null,e.start_y=-50,e}var i;return __extends(e,t),i=e,e.prototype.set_gradient_percentage=function(){this.gradient_node.setPosition(cc.v2(0,this.start_y+o.default.instance.fill_amount*(460-this.start_y))),console.log("Set bucket gradient")},e.prototype.onLoad=function(){i.instance=this,cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,this.getComponent(cc.PhysicsPolygonCollider).enabled=!0,this.getComponent(cc.PhysicsPolygonCollider).apply()},e.prototype.start=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0},e.prototype.onCollisionEnter=function(t,e){console.log("Bucket: Currently colliding")},e.prototype.onCollisionExit=function(t,e){console.log("Bucket: Done colliding")},e.instance=null,__decorate([r(cc.Node)],e.prototype,"gradient_node",void 0),e=i=__decorate([c],e)}(cc.Component);i.default=a,cc._RF.pop()},{"./brainObject":"brainObject"}]},{},["brainObject","bucketObject"]);